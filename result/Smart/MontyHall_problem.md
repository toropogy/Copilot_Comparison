## A) 標準ルールの導出

- 前提
  - 賞は扉に一様分布（3枚、事前確率は各 \(1/3\)）。
  - プレイヤーが1枚選択後、ホストは賞の場所を把握し、必ずプレイヤー以外のハズレを1枚だけ開ける。
  - ホストは必ずスイッチを提案する。

- 式
  - 記号: \(C\)（賞の扉），\(Y\)（プレイヤーの最初の選択），\(H\)（ホストがハズレ1枚を開けた事象）。
  - 標準ルールでは \(\Pr(H\mid C=Y)=1,\ \Pr(H\mid C\neq Y)=1\)。
  - よって
    \[
      \Pr(C=Y\mid H)
      = \frac{\Pr(H\mid C=Y)\Pr(C=Y)}{\Pr(H\mid C=Y)\Pr(C=Y)+\Pr(H\mid C\neq Y)\Pr(C\neq Y)}
      = \frac{1\cdot \tfrac{1}{3}}{1\cdot \tfrac{1}{3} + 1\cdot \tfrac{2}{3}} = \tfrac{1}{3}.
    \]
    従って残るもう一方の閉じた扉の確率は
    \(\Pr(C\neq Y\mid H)=1-\tfrac{1}{3}=\tfrac{2}{3}\)。

- 短い解説  
  ホストの開け方が「常にハズレ」で情報を漏らさないため、事後でも \(\Pr(C=Y)\) は \(1/3\) のまま固定され、開けられた扉の「確率質量 \(1/3\)」が丸ごと残りのもう1枚へ移る。

- 結論  
  **スイッチ有利**。スイッチ当たり確率は \(\boxed{2/3}\)。

---

## B) ランダム開け・不完全情報

- 前提
  - 賞は一様（3枚）。
  - ホストは賞の位置を知らず、プレイヤー以外の1枚をランダムに開ける。
  - たまたま開けた扉がハズレだった（ゲーム継続）ことが観測された。

- 式
  - 先と同じ記号で、観測事象を \(G\)（開けた扉がハズレ）とする。
  - \(\Pr(G\mid C=Y)=1\)（他の2枚は両方ハズレ）、\(\Pr(G\mid C\neq Y)=\tfrac{1}{2}\)（他の1枚は当たり、1枚はハズレ）。
  - よって
    \[
      \Pr(C=Y\mid G)
      = \frac{1\cdot \tfrac{1}{3}}{1\cdot \tfrac{1}{3} + \tfrac{1}{2}\cdot \tfrac{2}{3}}
      = \frac{\tfrac{1}{3}}{\tfrac{1}{3}+\tfrac{1}{3}}=\tfrac{1}{2},\qquad
      \Pr(C\neq Y\mid G)=\tfrac{1}{2}.
    \]
    残るもう1枚へスイッチしたときの当たり確率は \(\tfrac{1}{2}\)。

- 短い解説  
  「ハズレが開いた」という観測は、初手正解のときに起こりやすくなる（確率1対1/2）。その分だけ、事後で初手の確率が \(1/3 \to 1/2\) に引き上がる。

- 結論  
  **スイッチの優位は消え、五分**。当たり確率は「居座り」も「スイッチ」も \(\boxed{1/2}\)。

---

## C) 一般化（扉 \(n\)、意図的にハズレを開ける確率 \(q\)）

- 前提
  - 扉は \(n\) 枚、賞は一様。
  - プレイヤーは1枚選ぶ。ホストは1枚だけ開ける。
  - ホストは賞の位置を把握しており、各ゲームで確率 \(q\) で「意図的にハズレから」一様に選んで開け、確率 \(1-q\) で「他の \(n-1\) 枚から完全ランダム」に開ける（当たりを開けたらゲーム終了＝観測から除外）。
  - 観測事象 \(G\): 開けられた扉がハズレ（ゲーム継続）。プレイヤーは残る \(n-2\) 枚の中から一様に1枚へスイッチする。

- 式
  - 先と同様に \(C, Y\) を用いる。
  - 条件付き確率
    \[
      \Pr(G\mid C=Y)=1,\qquad
      \Pr(G\mid C\neq Y)=q\cdot 1 + (1-q)\cdot \frac{n-2}{n-1}
      = 1-\frac{1-q}{n-1}.
    \]
  - ベイズ更新
    \[
      \Pr(C=Y\mid G)
      = \frac{\tfrac{1}{n}}{\tfrac{1}{n} + \tfrac{n-1}{n}\Big(1-\frac{1-q}{n-1}\Big)}
      = \frac{1}{\,n-1+q\,}.
    \]
    よって \(\Pr(C\neq Y\mid G)=1-\frac{1}{n-1+q}=\frac{n-2+q}{n-1+q}\)。
  - スイッチ後に当たる確率（残り \(n-2\) 枚から一様に1枚にスイッチ）
    \[
      \boxed{\Pr_{\text{switch}}(n,q)
      = \frac{\Pr(C\neq Y\mid G)}{n-2}
      = \frac{n-2+q}{(n-1+q)(n-2)} }.
    \]
    参考：居座りの当たりは \(\Pr_{\text{stay}}(n,q)=\frac{1}{n-1+q}\)。

- 短い解説  
  \(q>0\) なら \(\Pr_{\text{switch}}(n,q)>\Pr_{\text{stay}}(n,q)\)（等式は \(q=0\) のみ）。つまり、ホストがわずかでも「当たりを避ける規則性」を持つほど、スイッチが有利になる。

- 結論  
  一般式は \(\boxed{\Pr_{\text{switch}}(n,q)=\dfrac{n-2+q}{(n-1+q)(n-2)}}\)。特別な場合 \(n=3,\ q=1\) で \(\Pr_{\text{switch}}(3,1)=\dfrac{2}{3}\) と標準結果に還元。

---

## D) 直観との橋渡し（情報リーク量・質量移動）

ホストが「当たりを避ける」ほど、観測「ハズレが開いた」は当たり前になり、初手の事後確率 \(\Pr(C=Y\mid \cdot)\) は動かず（標準ではそのまま \(1/n\)）、開けた扉の確率質量が残りの未開封群へ移動する。逆にホストが「無知にランダム」で開けると、ハズレが開く事象は「初手正解のときに起きやすい」ため、観測後に確率質量の一部が初手へ戻り、スイッチ優位が薄まる（\(q\) が情報リークの強さ＝質量移動の効率を連続的に制御する）。

---

## 実務の教訓

- 実験設計では、観測がどれだけ情報を漏らすかは「ホスト規則」に強く依存する。  
- 結果解釈の曖昧さを避けるため、ホスト（提示者）の行動規則を事前に明文化し、記録せよ。
